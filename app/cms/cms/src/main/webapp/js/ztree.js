(function(n){var nt,tt,it,rt,ut,ft,o={},h={},c={},et={treeId:"",treeObj:null,view:{addDiyDom:null,autoCancelSelected:!0,dblClickExpand:!0,expandSpeed:"fast",fontCss:{},nameIsHTML:!1,selectedMulti:!0,showIcon:!0,showLine:!0,showTitle:!0,txtSelectedEnable:!1},data:{key:{children:"children",name:"name",title:"",url:"url"},simpleData:{enable:!1,idKey:"id",pIdKey:"pId",rootPId:null},keep:{parent:!1,leaf:!1}},async:{enable:!1,contentType:"application/x-www-form-urlencoded",type:"post",dataType:"text",url:"",autoParam:[],otherParam:[],dataFilter:null},callback:{beforeAsync:null,beforeClick:null,beforeDblClick:null,beforeRightClick:null,beforeMouseDown:null,beforeMouseUp:null,beforeExpand:null,beforeCollapse:null,beforeRemove:null,onAsyncError:null,onAsyncSuccess:null,onNodeCreated:null,onClick:null,onDblClick:null,onRightClick:null,onMouseDown:null,onMouseUp:null,onExpand:null,onCollapse:null,onRemove:null}},l=[function(n){var t=n.treeObj,r=i.event;t.bind(r.NODECREATED,function(t,i,r){u.apply(n.callback.onNodeCreated,[t,i,r])});t.bind(r.CLICK,function(t,i,r,f,e){u.apply(n.callback.onClick,[i,r,f,e])});t.bind(r.EXPAND,function(t,i,r){u.apply(n.callback.onExpand,[t,i,r])});t.bind(r.COLLAPSE,function(t,i,r){u.apply(n.callback.onCollapse,[t,i,r])});t.bind(r.ASYNC_SUCCESS,function(t,i,r,f){u.apply(n.callback.onAsyncSuccess,[t,i,r,f])});t.bind(r.ASYNC_ERROR,function(t,i,r,f,e,o){u.apply(n.callback.onAsyncError,[t,i,r,f,e,o])})}],a=[function(n){var t=i.event;n.treeObj.unbind(t.NODECREATED).unbind(t.CLICK).unbind(t.EXPAND).unbind(t.COLLAPSE).unbind(t.ASYNC_SUCCESS).unbind(t.ASYNC_ERROR)}],v=[function(n){var i=t.getCache(n);i||(i={},t.setCache(n,i));i.nodes=[];i.doms=[]}],y=[function(n,i,r,f,e,o){if(r){var h=t.getRoot(n),s=n.data.key.children;r.level=i;r.tId=n.treeId+"_"+ ++h.zId;r.parentTId=f?f.tId:null;r.open=typeof r.open=="string"?u.eqs(r.open,"true"):!!r.open;r[s]&&r[s].length>0?(r.isParent=!0,r.zAsync=!0):(r.isParent=typeof r.isParent=="string"?u.eqs(r.isParent,"true"):!!r.isParent,r.open=r.isParent&&!n.async.enable?r.open:!1,r.zAsync=!r.isParent);r.isFirstNode=e;r.isLastNode=o;r.getParentNode=function(){return t.getNodeCache(n,r.parentTId)};r.getPreNode=function(){return t.getPreNode(n,r)};r.getNextNode=function(){return t.getNextNode(n,r)};r.isAjaxing=!1;t.fixPIdKeyValue(n,r)}}],s=[function(n){var s=n.target,r=t.getSetting(n.data.treeId),f="",l=null,e="",o="",a=null,c=null,h=null;if(u.eqs(n.type,"mousedown")?o="mousedown":u.eqs(n.type,"mouseup")?o="mouseup":u.eqs(n.type,"contextmenu")?o="contextmenu":u.eqs(n.type,"click")?u.eqs(s.tagName,"span")&&s.getAttribute("treeNode"+i.id.SWITCH)!==null?(f=u.getNodeMainDom(s).id,e="switchNode"):(h=u.getMDom(r,s,[{tagName:"a",attrName:"treeNode"+i.id.A}]))&&(f=u.getNodeMainDom(h).id,e="clickNode"):u.eqs(n.type,"dblclick")&&(o="dblclick",h=u.getMDom(r,s,[{tagName:"a",attrName:"treeNode"+i.id.A}]))&&(f=u.getNodeMainDom(h).id,e="switchNode"),o.length>0&&f.length==0&&(h=u.getMDom(r,s,[{tagName:"a",attrName:"treeNode"+i.id.A}]))&&(f=u.getNodeMainDom(h).id),f.length>0)switch(l=t.getNodeCache(r,f),e){case"switchNode":l.isParent?u.eqs(n.type,"click")||u.eqs(n.type,"dblclick")&&u.apply(r.view.dblClickExpand,[r.treeId,l],r.view.dblClickExpand)?a=nt:e="":e="";break;case"clickNode":a=tt}switch(o){case"mousedown":c=it;break;case"mouseup":c=rt;break;case"dblclick":c=ut;break;case"contextmenu":c=ft}return{stop:!1,node:l,nodeEventType:e,nodeEventCallback:a,treeEventType:o,treeEventCallback:c}}],p=[function(n){var i=t.getRoot(n);i||(i={},t.setRoot(n,i));i[n.data.key.children]=[];i.expandTriggerFlag=!1;i.curSelectedList=[];i.noSelection=!0;i.createdNodes=[];i.zId=0;i._ver=(new Date).getTime()}],w=[],b=[],k=[],d=[],g=[],t={addNodeCache:function(n,i){t.getCache(n).nodes[t.getNodeCacheId(i.tId)]=i},getNodeCacheId:function(n){return n.substring(n.lastIndexOf("_")+1)},addAfterA:function(n){b.push(n)},addBeforeA:function(n){w.push(n)},addInnerAfterA:function(n){d.push(n)},addInnerBeforeA:function(n){k.push(n)},addInitBind:function(n){l.push(n)},addInitUnBind:function(n){a.push(n)},addInitCache:function(n){v.push(n)},addInitNode:function(n){y.push(n)},addInitProxy:function(n,t){t?s.splice(0,0,n):s.push(n)},addInitRoot:function(n){p.push(n)},addNodesData:function(n,t,i){var u=n.data.key.children;t[u]||(t[u]=[]);t[u].length>0&&(t[u][t[u].length-1].isLastNode=!1,r.setNodeLineIcos(n,t[u][t[u].length-1]));t.isParent=!0;t[u]=t[u].concat(i)},addSelectedNode:function(n,i){var r=t.getRoot(n);t.isSelectedNode(n,i)||r.curSelectedList.push(i)},addCreatedNode:function(n,i){(n.callback.onNodeCreated||n.view.addDiyDom)&&t.getRoot(n).createdNodes.push(i)},addZTreeTools:function(n){g.push(n)},exSetting:function(t){n.extend(!0,et,t)},fixPIdKeyValue:function(n,t){n.data.simpleData.enable&&(t[n.data.simpleData.pIdKey]=t.parentTId?t.getParentNode()[n.data.simpleData.idKey]:n.data.simpleData.rootPId)},getAfterA:function(){for(var n=0,t=b.length;n<t;n++)b[n].apply(this,arguments)},getBeforeA:function(){for(var n=0,t=w.length;n<t;n++)w[n].apply(this,arguments)},getInnerAfterA:function(){for(var n=0,t=d.length;n<t;n++)d[n].apply(this,arguments)},getInnerBeforeA:function(){for(var n=0,t=k.length;n<t;n++)k[n].apply(this,arguments)},getCache:function(n){return c[n.treeId]},getNextNode:function(n,i){if(!i)return null;for(var u=n.data.key.children,f=i.parentTId?i.getParentNode():t.getRoot(n),r=0,e=f[u].length-1;r<=e;r++)if(f[u][r]===i)return r==e?null:f[u][r+1];return null},getNodeByParam:function(n,i,r,u){var e;if(!i||!r)return null;for(var o=n.data.key.children,f=0,s=i.length;f<s;f++){if(i[f][r]==u)return i[f];if(e=t.getNodeByParam(n,i[f][o],r,u),e)return e}return null},getNodeCache:function(n,i){if(!i)return null;var r=c[n.treeId].nodes[t.getNodeCacheId(i)];return r?r:null},getNodeName:function(n,t){return""+t[n.data.key.name]},getNodeTitle:function(n,t){return""+t[n.data.key.title===""?n.data.key.name:n.data.key.title]},getNodes:function(n){return t.getRoot(n)[n.data.key.children]},getNodesByParam:function(n,i,r,u){if(!i||!r)return[];for(var o=n.data.key.children,e=[],f=0,s=i.length;f<s;f++)i[f][r]==u&&e.push(i[f]),e=e.concat(t.getNodesByParam(n,i[f][o],r,u));return e},getNodesByParamFuzzy:function(n,i,r,u){if(!i||!r)return[];for(var o=n.data.key.children,e=[],u=u.toLowerCase(),f=0,s=i.length;f<s;f++)typeof i[f][r]=="string"&&i[f][r].toLowerCase().indexOf(u)>-1&&e.push(i[f]),e=e.concat(t.getNodesByParamFuzzy(n,i[f][o],r,u));return e},getNodesByFilter:function(n,i,r,f,e){var s;if(!i)return f?null:[];for(var c=n.data.key.children,h=f?null:[],o=0,l=i.length;o<l;o++){if(u.apply(r,[i[o],e],!1)){if(f)return i[o];h.push(i[o])}if(s=t.getNodesByFilter(n,i[o][c],r,f,e),f&&s)return s;h=f?s:h.concat(s)}return h},getPreNode:function(n,i){if(!i)return null;for(var u=n.data.key.children,f=i.parentTId?i.getParentNode():t.getRoot(n),r=0,e=f[u].length;r<e;r++)if(f[u][r]===i)return r==0?null:f[u][r-1];return null},getRoot:function(n){return n?h[n.treeId]:null},getRoots:function(){return h},getSetting:function(n){return o[n]},getSettings:function(){return o},getZTreeTools:function(n){return(n=this.getRoot(this.getSetting(n)))?n.treeTools:null},initCache:function(){for(var n=0,t=v.length;n<t;n++)v[n].apply(this,arguments)},initNode:function(){for(var n=0,t=y.length;n<t;n++)y[n].apply(this,arguments)},initRoot:function(){for(var n=0,t=p.length;n<t;n++)p[n].apply(this,arguments)},isSelectedNode:function(n,i){for(var u=t.getRoot(n),r=0,f=u.curSelectedList.length;r<f;r++)if(i===u.curSelectedList[r])return!0;return!1},removeNodeCache:function(n,i){var u=n.data.key.children,r,f;if(i[u])for(r=0,f=i[u].length;r<f;r++)arguments.callee(n,i[u][r]);t.getCache(n).nodes[t.getNodeCacheId(i.tId)]=null},removeSelectedNode:function(n,i){for(var u=t.getRoot(n),r=0,f=u.curSelectedList.length;r<f;r++)i!==u.curSelectedList[r]&&t.getNodeCache(n,u.curSelectedList[r].tId)||(u.curSelectedList.splice(r,1),r--,f--)},setCache:function(n,t){c[n.treeId]=t},setRoot:function(n,t){h[n.treeId]=t},setZTreeTools:function(){for(var n=0,t=g.length;n<t;n++)g[n].apply(this,arguments)},transformToArrayFormat:function(n,i){var e,r,f,o;if(!i)return[];if(e=n.data.key.children,r=[],u.isArray(i))for(f=0,o=i.length;f<o;f++)r.push(i[f]),i[f][e]&&(r=r.concat(t.transformToArrayFormat(n,i[f][e])));else r.push(i),i[e]&&(r=r.concat(t.transformToArrayFormat(n,i[e])));return r},transformTozTreeFormat:function(n,t){var i,e,o=n.data.simpleData.idKey,f=n.data.simpleData.pIdKey,s=n.data.key.children,h,r;if(!o||o==""||!t)return[];if(u.isArray(t)){for(h=[],r=[],i=0,e=t.length;i<e;i++)r[t[i][o]]=t[i];for(i=0,e=t.length;i<e;i++)r[t[i][f]]&&t[i][o]!=t[i][f]?(r[t[i][f]][s]||(r[t[i][f]][s]=[]),r[t[i][f]][s].push(t[i])):h.push(t[i]);return h}return[t]}},e={bindEvent:function(){for(var n=0,t=l.length;n<t;n++)l[n].apply(this,arguments)},unbindEvent:function(){for(var n=0,t=a.length;n<t;n++)a[n].apply(this,arguments)},bindTree:function(n){var i={treeId:n.treeId},t=n.treeObj;n.view.txtSelectedEnable||t.bind("selectstart",function(n){return n=n.originalEvent.srcElement.nodeName.toLowerCase(),n==="input"||n==="textarea"}).css({"-moz-user-select":"-moz-none"});t.bind("click",i,e.proxy);t.bind("dblclick",i,e.proxy);t.bind("mouseover",i,e.proxy);t.bind("mouseout",i,e.proxy);t.bind("mousedown",i,e.proxy);t.bind("mouseup",i,e.proxy);t.bind("contextmenu",i,e.proxy)},unbindTree:function(n){n.treeObj.unbind("click",e.proxy).unbind("dblclick",e.proxy).unbind("mouseover",e.proxy).unbind("mouseout",e.proxy).unbind("mousedown",e.proxy).unbind("mouseup",e.proxy).unbind("contextmenu",e.proxy)},doProxy:function(){for(var t,i=[],n=0,r=s.length;n<r;n++)if(t=s[n].apply(this,arguments),i.push(t),t.stop)break;return i},proxy:function(n){var f=t.getSetting(n.data.treeId),i;if(!u.uCanDo(f,n))return!0;for(var f=e.doProxy(n),r=!0,o=0,s=f.length;o<s;o++)i=f[o],i.nodeEventCallback&&(r=i.nodeEventCallback.apply(i,[n,i.node])&&r),i.treeEventCallback&&(r=i.treeEventCallback.apply(i,[n,i.node])&&r);return r}},u,r;nt=function(n,i){var f=t.getSetting(n.data.treeId);if(i.open){if(u.apply(f.callback.beforeCollapse,[f.treeId,i],!0)==!1)return!0}else if(u.apply(f.callback.beforeExpand,[f.treeId,i],!0)==!1)return!0;return t.getRoot(f).expandTriggerFlag=!0,r.switchNode(f,i),!0};tt=function(n,f){var e=t.getSetting(n.data.treeId),o=e.view.autoCancelSelected&&n.ctrlKey&&t.isSelectedNode(e,f)?0:e.view.autoCancelSelected&&n.ctrlKey&&e.view.selectedMulti?2:1;return u.apply(e.callback.beforeClick,[e.treeId,f,o],!0)==!1?!0:(o===0?r.cancelPreSelectedNode(e,f):r.selectNode(e,f,o===2),e.treeObj.trigger(i.event.CLICK,[n,e.treeId,f,o]),!0)};it=function(n,i){var r=t.getSetting(n.data.treeId);return u.apply(r.callback.beforeMouseDown,[r.treeId,i],!0)&&u.apply(r.callback.onMouseDown,[n,r.treeId,i]),!0};rt=function(n,i){var r=t.getSetting(n.data.treeId);return u.apply(r.callback.beforeMouseUp,[r.treeId,i],!0)&&u.apply(r.callback.onMouseUp,[n,r.treeId,i]),!0};ut=function(n,i){var r=t.getSetting(n.data.treeId);return u.apply(r.callback.beforeDblClick,[r.treeId,i],!0)&&u.apply(r.callback.onDblClick,[n,r.treeId,i]),!0};ft=function(n,i){var r=t.getSetting(n.data.treeId);return u.apply(r.callback.beforeRightClick,[r.treeId,i],!0)&&u.apply(r.callback.onRightClick,[n,r.treeId,i]),typeof r.callback.onRightClick!="function"};u={apply:function(n,t,i){return typeof n=="function"?n.apply(ot,t?t:[]):i},canAsync:function(n,t){var i=n.data.key.children;return n.async.enable&&t&&t.isParent&&!(t.zAsync||t[i]&&t[i].length>0)},clone:function(n){if(n===null)return null;var i=u.isArray(n)?[]:{};for(var t in n)i[t]=n[t]instanceof Date?new Date(n[t].getTime()):typeof n[t]=="object"?arguments.callee(n[t]):n[t];return i},eqs:function(n,t){return n.toLowerCase()===t.toLowerCase()},isArray:function(n){return Object.prototype.toString.apply(n)==="[object Array]"},$:function(t,i,r){return i&&typeof i!="string"&&(r=i,i=""),typeof t=="string"?n(t,r?r.treeObj.get(0).ownerDocument:null):n("#"+t.tId+i,r?r.treeObj:null)},getMDom:function(n,t,i){if(!t)return null;for(;t&&t.id!==n.treeId;){for(var r=0,f=i.length;t.tagName&&r<f;r++)if(u.eqs(t.tagName,i[r].tagName)&&t.getAttribute(i[r].attrName)!==null)return t;t=t.parentNode}return null},getNodeMainDom:function(t){return n(t).parent("li").get(0)||n(t).parentsUntil("li").parent().get(0)},isChildOrSelf:function(t,i){return n(t).closest("#"+i).length>0},uCanDo:function(){return!0}};r={addNodes:function(n,e,o,s){if(!n.data.keep.leaf||!e||e.isParent)if(u.isArray(o)||(o=[o]),n.data.simpleData.enable&&(o=t.transformTozTreeFormat(n,o)),e){var h=f(e,i.id.SWITCH,n),c=f(e,i.id.ICON,n),l=f(e,i.id.UL,n);e.open||(r.replaceSwitchClass(e,h,i.folder.CLOSE),r.replaceIcoClass(e,c,i.folder.CLOSE),e.open=!1,l.css({display:"none"}));t.addNodesData(n,e,o);r.createNodes(n,e.level+1,o,e);s||r.expandCollapseParentNode(n,e,!0)}else t.addNodesData(n,t.getRoot(n),o),r.createNodes(n,0,o,null)},appendNodes:function(n,i,u,f,e,o){var s,l;if(!u)return[];for(var h=[],a=n.data.key.children,c=0,v=u.length;c<v;c++)s=u[c],e&&(l=(f?f:t.getRoot(n))[a].length==u.length&&c==0,t.initNode(n,i,s,f,l,c==u.length-1,o),t.addNodeCache(n,s)),l=[],s[a]&&s[a].length>0&&(l=r.appendNodes(n,i+1,s[a],s,e,o&&s.open)),o&&(r.makeDOMNodeMainBefore(h,n,s),r.makeDOMNodeLine(h,n,s),t.getBeforeA(n,s,h),r.makeDOMNodeNameBefore(h,n,s),t.getInnerBeforeA(n,s,h),r.makeDOMNodeIcon(h,n,s),t.getInnerAfterA(n,s,h),r.makeDOMNodeNameAfter(h,n,s),t.getAfterA(n,s,h),s.isParent&&s.open&&r.makeUlHtml(n,s,h,l.join("")),r.makeDOMNodeMainAfter(h,n,s),t.addCreatedNode(n,s));return h},appendParentULDom:function(n,t){var o=[],e=f(t,n),u;!e.get(0)&&t.parentTId&&(r.appendParentULDom(n,t.getParentNode()),e=f(t,n));u=f(t,i.id.UL,n);u.get(0)&&u.remove();u=r.appendNodes(n,t.level+1,t[n.data.key.children],t,!1,!0);r.makeUlHtml(n,t,o,u.join(""));e.append(o.join(""))},asyncNode:function(e,o,s,h){var c,v,a,l,y,p,w;if(o&&!o.isParent)return u.apply(h),!1;if(o&&o.isAjaxing)return!1;if(u.apply(e.callback.beforeAsync,[e.treeId,o],!0)==!1)return u.apply(h),!1;for(o&&(o.isAjaxing=!0,f(o,i.id.ICON,e).attr({style:"","class":i.className.BUTTON+" "+i.className.ICO_LOADING})),a={},c=0,v=e.async.autoParam.length;o&&c<v;c++)l=e.async.autoParam[c].split("="),y=l,l.length>1&&(y=l[1],l=l[0]),a[y]=o[l];if(u.isArray(e.async.otherParam))for(c=0,v=e.async.otherParam.length;c<v;c+=2)a[e.async.otherParam[c]]=e.async.otherParam[c+1];else for(p in e.async.otherParam)a[p]=e.async.otherParam[p];return w=t.getRoot(e)._ver,n.ajax({contentType:e.async.contentType,type:e.async.type,url:u.apply(e.async.url,[e.treeId,o],e.async.url),data:a,dataType:e.async.dataType,success:function(f){if(w==t.getRoot(e)._ver){var g=[];try{g=!f||f.length==0?[]:typeof f=="string"?eval("("+f+")"):f}catch(l){g=f}o&&(o.isAjaxing=null,o.zAsync=!0);r.setNodeLineIcos(e,o);g&&g!==""?(g=u.apply(e.async.dataFilter,[e.treeId,o,g],g),r.addNodes(e,o,g?u.clone(g):[],!!s)):r.addNodes(e,o,[],!!s);e.treeObj.trigger(i.event.ASYNC_SUCCESS,[e.treeId,o,f]);u.apply(h)}},error:function(n,u,f){w==t.getRoot(e)._ver&&(o&&(o.isAjaxing=null),r.setNodeLineIcos(e,o),e.treeObj.trigger(i.event.ASYNC_ERROR,[e.treeId,o,n,u,f]))}}),!0},cancelPreSelectedNode:function(n,r){for(var e=t.getRoot(n).curSelectedList,u=e.length-1;u>=0;u--)if((!r||r===e[u])&&(f(e[u],i.id.A,n).removeClass(i.node.CURSELECTED),r)){t.removeSelectedNode(n,r);break}r||(t.getRoot(n).curSelectedList=[])},createNodeCallback:function(n){var r,f;if(n.callback.onNodeCreated||n.view.addDiyDom)for(r=t.getRoot(n);r.createdNodes.length>0;)f=r.createdNodes.shift(),u.apply(n.view.addDiyDom,[n.treeId,f]),n.callback.onNodeCreated&&n.treeObj.trigger(i.event.NODECREATED,[n.treeId,f])},createNodes:function(n,u,e,o){if(e&&e.length!=0){var h=t.getRoot(n),s=n.data.key.children,s=!o||o.open||!!f(o[s][0],n).get(0);h.createdNodes=[];u=r.appendNodes(n,u,e,o,!0,s);o?(o=f(o,i.id.UL,n),o.get(0)&&o.append(u.join(""))):n.treeObj.append(u.join(""));r.createNodeCallback(n)}},destroy:function(n){n&&(t.initCache(n),t.initRoot(n),e.unbindTree(n),e.unbindEvent(n),n.treeObj.empty())},expandCollapseNode:function(n,e,o,s,h){var l=t.getRoot(n),c=n.data.key.children,a,h;if(e)if(l.expandTriggerFlag&&(a=h,h=function(){a&&a();e.open?n.treeObj.trigger(i.event.EXPAND,[n.treeId,e]):n.treeObj.trigger(i.event.COLLAPSE,[n.treeId,e])},l.expandTriggerFlag=!1),!e.open&&e.isParent&&(!f(e,i.id.UL,n).get(0)||e[c]&&e[c].length>0&&!f(e[c][0],n).get(0))&&(r.appendParentULDom(n,e),r.createNodeCallback(n)),e.open==o)u.apply(h,[]);else{var o=f(e,i.id.UL,n),l=f(e,i.id.SWITCH,n),v=f(e,i.id.ICON,n);e.isParent?(e.open=!e.open,e.iconOpen&&e.iconClose&&v.attr("style",r.makeNodeIcoStyle(n,e)),e.open?(r.replaceSwitchClass(e,l,i.folder.OPEN),r.replaceIcoClass(e,v,i.folder.OPEN),s==!1||n.view.expandSpeed==""?(o.show(),u.apply(h,[])):e[c]&&e[c].length>0?o.slideDown(n.view.expandSpeed,h):(o.show(),u.apply(h,[]))):(r.replaceSwitchClass(e,l,i.folder.CLOSE),r.replaceIcoClass(e,v,i.folder.CLOSE),s==!1||n.view.expandSpeed==""||!(e[c]&&e[c].length>0)?(o.hide(),u.apply(h,[])):o.slideUp(n.view.expandSpeed,h))):u.apply(h,[])}else u.apply(h,[])},expandCollapseParentNode:function(n,t,i,u,f){t&&(t.parentTId?(r.expandCollapseNode(n,t,i,u),t.parentTId&&r.expandCollapseParentNode(n,t.getParentNode(),i,u,f)):r.expandCollapseNode(n,t,i,u,f))},expandCollapseSonNode:function(n,i,u,f,e){var o=t.getRoot(n),h=n.data.key.children,o=i?i[h]:o[h],h=i?!1:f,l=t.getRoot(n).expandTriggerFlag,s,c;if(t.getRoot(n).expandTriggerFlag=!1,o)for(s=0,c=o.length;s<c;s++)o[s]&&r.expandCollapseSonNode(n,o[s],u,h);t.getRoot(n).expandTriggerFlag=l;r.expandCollapseNode(n,i,u,f,e)},makeDOMNodeIcon:function(n,u,f){var e=t.getNodeName(u,f),e=u.view.nameIsHTML?e:e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");n.push("<span id='",f.tId,i.id.ICON,"' title='' treeNode",i.id.ICON," class='",r.makeNodeIcoClass(u,f),"' style='",r.makeNodeIcoStyle(u,f),"'><\/span><span id='",f.tId,i.id.SPAN,"'>",e,"<\/span>")},makeDOMNodeLine:function(n,t,u){n.push("<span id='",u.tId,i.id.SWITCH,"' title='' class='",r.makeNodeLineClass(t,u),"' treeNode",i.id.SWITCH,"><\/span>")},makeDOMNodeMainAfter:function(n){n.push("<\/li>")},makeDOMNodeMainBefore:function(n,t,r){n.push("<li id='",r.tId,"' class='",i.className.LEVEL,r.level,"' tabindex='0' hidefocus='true' treenode>")},makeDOMNodeNameAfter:function(n){n.push("<\/a>")},makeDOMNodeNameBefore:function(n,f,e){var s=t.getNodeTitle(f,e),o=r.makeNodeUrl(f,e),h=r.makeNodeFontCss(f,e),c=[];for(var l in h)c.push(l,":",h[l],";");n.push("<a id='",e.tId,i.id.A,"' class='",i.className.LEVEL,e.level,"' treeNode",i.id.A,' onclick="',e.click||"",'" ',o!=null&&o.length>0?"href='"+o+"'":""," target='",r.makeNodeTarget(e),"' style='",c.join(""),"'");u.apply(f.view.showTitle,[f.treeId,e],f.view.showTitle)&&s&&n.push("title='",s.replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"'");n.push(">")},makeNodeFontCss:function(n,t){var i=u.apply(n.view.fontCss,[n.treeId,t],n.view.fontCss);return i&&typeof i!="function"?i:{}},makeNodeIcoClass:function(n,t){var r=["ico"];return t.isAjaxing||(r[0]=(t.iconSkin?t.iconSkin+"_":"")+r[0],t.isParent?r.push(t.open?i.folder.OPEN:i.folder.CLOSE):r.push(i.folder.DOCU)),i.className.BUTTON+" "+r.join("_")},makeNodeIcoStyle:function(n,t){var i=[],r;return t.isAjaxing||(r=t.isParent&&t.iconOpen&&t.iconClose?t.open?t.iconOpen:t.iconClose:t.icon,r&&i.push("background:url(",r,") 0 0 no-repeat;"),n.view.showIcon!=!1&&u.apply(n.view.showIcon,[n.treeId,t],!0)||i.push("width:0px;height:0px;")),i.join("")},makeNodeLineClass:function(n,t){var u=[];return n.view.showLine?t.level==0&&t.isFirstNode&&t.isLastNode?u.push(i.line.ROOT):t.level==0&&t.isFirstNode?u.push(i.line.ROOTS):t.isLastNode?u.push(i.line.BOTTOM):u.push(i.line.CENTER):u.push(i.line.NOLINE),t.isParent?u.push(t.open?i.folder.OPEN:i.folder.CLOSE):u.push(i.folder.DOCU),r.makeNodeLineClassEx(t)+u.join("_")},makeNodeLineClassEx:function(n){return i.className.BUTTON+" "+i.className.LEVEL+n.level+" "+i.className.SWITCH+" "},makeNodeTarget:function(n){return n.target||"_blank"},makeNodeUrl:function(n,t){var i=n.data.key.url;return t[i]?t[i]:null},makeUlHtml:function(n,t,u,f){u.push("<ul id='",t.tId,i.id.UL,"' class='",i.className.LEVEL,t.level," ",r.makeUlLineClass(n,t),"' style='display:",t.open?"block":"none","'>");u.push(f);u.push("<\/ul>")},makeUlLineClass:function(n,t){return n.view.showLine&&!t.isLastNode?i.line.LINE:""},removeChildNodes:function(n,u){var o,e,s,h;if(u&&(o=n.data.key.children,e=u[o],e)){for(s=0,h=e.length;s<h;s++)t.removeNodeCache(n,e[s]);t.removeSelectedNode(n);delete u[o];n.data.keep.parent?f(u,i.id.UL,n).empty():(u.isParent=!1,u.open=!1,o=f(u,i.id.SWITCH,n),e=f(u,i.id.ICON,n),r.replaceSwitchClass(u,o,i.folder.DOCU),r.replaceIcoClass(u,e,i.folder.DOCU),f(u,i.id.UL,n).remove())}},setFirstNode:function(n,t){var i=n.data.key.children;t[i].length>0&&(t[i][0].isFirstNode=!0)},setLastNode:function(n,t){var i=n.data.key.children,r=t[i].length;r>0&&(t[i][r-1].isLastNode=!0)},removeNode:function(n,u){var l=t.getRoot(n),s=n.data.key.children,e=u.parentTId?u.getParentNode():l,h,a,o;if(u.isFirstNode=!1,u.isLastNode=!1,u.getPreNode=function(){return null},u.getNextNode=function(){return null},t.getNodeCache(n,u.tId)){for(f(u,n).remove(),t.removeNodeCache(n,u),t.removeSelectedNode(n,u),o=0,h=e[s].length;o<h;o++)if(e[s][o].tId==u.tId){e[s].splice(o,1);break}if(r.setFirstNode(n,e),r.setLastNode(n,e),o=e[s].length,n.data.keep.parent||o!=0){if(n.view.showLine&&o>0){var c=e[s][o-1],o=f(c,i.id.UL,n),h=f(c,i.id.SWITCH,n);a=f(c,i.id.ICON,n);e==l?e[s].length==1?r.replaceSwitchClass(c,h,i.line.ROOT):(l=f(e[s][0],i.id.SWITCH,n),r.replaceSwitchClass(e[s][0],l,i.line.ROOTS),r.replaceSwitchClass(c,h,i.line.BOTTOM)):r.replaceSwitchClass(c,h,i.line.BOTTOM);o.removeClass(i.line.LINE)}}else e.isParent=!1,e.open=!1,o=f(e,i.id.UL,n),h=f(e,i.id.SWITCH,n),a=f(e,i.id.ICON,n),r.replaceSwitchClass(e,h,i.folder.DOCU),r.replaceIcoClass(e,a,i.folder.DOCU),o.css("display","none")}},replaceIcoClass:function(n,t,r){if(t&&!n.isAjaxing&&(n=t.attr("class"),n!=void 0)){n=n.split("_");switch(r){case i.folder.OPEN:case i.folder.CLOSE:case i.folder.DOCU:n[n.length-1]=r}t.attr("class",n.join("_"))}},replaceSwitchClass:function(n,t,u){if(t){var f=t.attr("class");if(f!=void 0){f=f.split("_");switch(u){case i.line.ROOT:case i.line.ROOTS:case i.line.CENTER:case i.line.BOTTOM:case i.line.NOLINE:f[0]=r.makeNodeLineClassEx(n)+u;break;case i.folder.OPEN:case i.folder.CLOSE:case i.folder.DOCU:f[1]=u}t.attr("class",f.join("_"));u!==i.folder.DOCU?t.removeAttr("disabled"):t.attr("disabled","disabled")}}},selectNode:function(n,u,e){e||r.cancelPreSelectedNode(n);f(u,i.id.A,n).addClass(i.node.CURSELECTED);t.addSelectedNode(n,u)},setNodeFontCss:function(n,t){var e=f(t,i.id.A,n),u=r.makeNodeFontCss(n,t);u&&e.css(u)},setNodeLineIcos:function(n,t){if(t){var u=f(t,i.id.SWITCH,n),o=f(t,i.id.UL,n),e=f(t,i.id.ICON,n),s=r.makeUlLineClass(n,t);s.length==0?o.removeClass(i.line.LINE):o.addClass(s);u.attr("class",r.makeNodeLineClass(n,t));t.isParent?u.removeAttr("disabled"):u.attr("disabled","disabled");e.removeAttr("style");e.attr("style",r.makeNodeIcoStyle(n,t));e.attr("class",r.makeNodeIcoClass(n,t))}},setNodeName:function(n,r){var o=t.getNodeTitle(n,r),e=f(r,i.id.SPAN,n);e.empty();n.view.nameIsHTML?e.html(t.getNodeName(n,r)):e.text(t.getNodeName(n,r));u.apply(n.view.showTitle,[n.treeId,r],n.view.showTitle)&&f(r,i.id.A,n).attr("title",o?o:"")},setNodeTarget:function(n,t){f(t,i.id.A,n).attr("target",r.makeNodeTarget(t))},setNodeUrl:function(n,t){var e=f(t,i.id.A,n),u=r.makeNodeUrl(n,t);u==null||u.length==0?e.removeAttr("href"):e.attr("href",u)},switchNode:function(n,t){t.open||!u.canAsync(n,t)?r.expandCollapseNode(n,t,!t.open):n.async.enable?r.asyncNode(n,t)||r.expandCollapseNode(n,t,!t.open):t&&r.expandCollapseNode(n,t,!t.open)}};n.fn.zTree={consts:{className:{BUTTON:"button",LEVEL:"level",ICO_LOADING:"ico_loading",SWITCH:"switch"},event:{NODECREATED:"ztree_nodeCreated",CLICK:"ztree_click",EXPAND:"ztree_expand",COLLAPSE:"ztree_collapse",ASYNC_SUCCESS:"ztree_async_success",ASYNC_ERROR:"ztree_async_error"},id:{A:"_a",ICON:"_ico",SPAN:"_span",SWITCH:"_switch",UL:"_ul"},line:{ROOT:"root",ROOTS:"roots",CENTER:"center",BOTTOM:"bottom",NOLINE:"noline",LINE:"line"},folder:{OPEN:"open",CLOSE:"close",DOCU:"docu"},node:{CURSELECTED:"curSelectedNode"}},_z:{tools:u,view:r,event:e,data:t},getZTreeObj:function(n){return(n=t.getZTreeTools(n))?n:null},destroy:function(n){if(n&&n.length>0)r.destroy(t.getSetting(n));else for(var i in o)r.destroy(o[i])},init:function(s,h,c){var l=u.clone(et);return n.extend(!0,l,h),l.treeId=s.attr("id"),l.treeObj=s,l.treeObj.empty(),o[l.treeId]=l,typeof document.body.style.maxHeight=="undefined"&&(l.view.expandSpeed=""),t.initRoot(l),s=t.getRoot(l),h=l.data.key.children,c=c?u.clone(u.isArray(c)?c:[c]):[],s[h]=l.data.simpleData.enable?t.transformTozTreeFormat(l,c):c,t.initCache(l),e.unbindTree(l),e.bindTree(l),e.unbindEvent(l),e.bindEvent(l),c={setting:l,addNodes:function(n,t,i){function f(){r.addNodes(l,n,e,i==!0)}if(!t||(n||(n=null),n&&!n.isParent&&l.data.keep.leaf))return null;var e=u.clone(u.isArray(t)?t:[t]);return u.canAsync(l,n)?r.asyncNode(l,n,i,f):f(),e},cancelSelectedNode:function(n){r.cancelPreSelectedNode(l,n)},destroy:function(){r.destroy(l)},expandAll:function(n){return n=!!n,r.expandCollapseSonNode(l,null,n,!0),n},expandNode:function(n,i,e,o,s){if(!n||!n.isParent||(i!==!0&&i!==!1&&(i=!n.open),(s=!!s)&&i&&u.apply(l.callback.beforeExpand,[l.treeId,n],!0)==!1)||s&&!i&&u.apply(l.callback.beforeCollapse,[l.treeId,n],!0)==!1||(i&&n.parentTId&&r.expandCollapseParentNode(l,n.getParentNode(),i,!1),i===n.open&&!e))return null;if(t.getRoot(l).expandTriggerFlag=s,!u.canAsync(l,n)&&e)r.expandCollapseSonNode(l,n,i,!0,function(){if(o!==!1)try{f(n,l).focus().blur()}catch(t){}});else if(n.open=!i,r.switchNode(this.setting,n),o!==!1)try{f(n,l).focus().blur()}catch(h){}return i},getNodes:function(){return t.getNodes(l)},getNodeByParam:function(n,i,r){return n?t.getNodeByParam(l,r?r[l.data.key.children]:t.getNodes(l),n,i):null},getNodeByTId:function(n){return t.getNodeCache(l,n)},getNodesByParam:function(n,i,r){return n?t.getNodesByParam(l,r?r[l.data.key.children]:t.getNodes(l),n,i):null},getNodesByParamFuzzy:function(n,i,r){return n?t.getNodesByParamFuzzy(l,r?r[l.data.key.children]:t.getNodes(l),n,i):null},getNodesByFilter:function(n,i,r,u){return i=!!i,!n||typeof n!="function"?i?null:[]:t.getNodesByFilter(l,r?r[l.data.key.children]:t.getNodes(l),n,i,u)},getNodeIndex:function(n){if(!n)return null;for(var r=l.data.key.children,u=n.parentTId?n.getParentNode():t.getRoot(l),i=0,f=u[r].length;i<f;i++)if(u[r][i]==n)return i;return-1},getSelectedNodes:function(){for(var i=[],r=t.getRoot(l).curSelectedList,n=0,u=r.length;n<u;n++)i.push(r[n]);return i},isSelectedNode:function(n){return t.isSelectedNode(l,n)},reAsyncChildNodes:function(n,u,e){var o;if(this.setting.async.enable){if(o=!n,o&&(n=t.getRoot(l)),u=="refresh"){for(var u=this.setting.data.key.children,s=0,h=n[u]?n[u].length:0;s<h;s++)t.removeNodeCache(l,n[u][s]);t.removeSelectedNode(l);n[u]=[];o?this.setting.treeObj.empty():f(n,i.id.UL,l).empty()}r.asyncNode(this.setting,o?null:n,!!e)}},refresh:function(){this.setting.treeObj.empty();var n=t.getRoot(l),i=n[l.data.key.children];t.initRoot(l);n[l.data.key.children]=i;t.initCache(l);r.createNodes(l,0,n[l.data.key.children])},removeChildNodes:function(n){if(!n)return null;var t=n[l.data.key.children];return r.removeChildNodes(l,n),t?t:null},removeNode:function(n,t){n&&(t=!!t,t&&u.apply(l.callback.beforeRemove,[l.treeId,n],!0)==!1||(r.removeNode(l,n),t&&this.setting.treeObj.trigger(i.event.REMOVE,[l.treeId,n])))},selectNode:function(n,t){if(n&&u.uCanDo(l)){if(t=l.view.selectedMulti&&t,n.parentTId)r.expandCollapseParentNode(l,n.getParentNode(),!0,!1,function(){try{f(n,l).focus().blur()}catch(t){}});else try{f(n,l).focus().blur()}catch(i){}r.selectNode(l,n,t)}},transformTozTreeNodes:function(n){return t.transformTozTreeFormat(l,n)},transformToArray:function(n){return t.transformToArrayFormat(l,n)},updateNode:function(n){n&&f(n,l).get(0)&&u.uCanDo(l)&&(r.setNodeName(l,n),r.setNodeTarget(l,n),r.setNodeUrl(l,n),r.setNodeLineIcos(l,n),r.setNodeFontCss(l,n))}},s.treeTools=c,t.setZTreeTools(l,c),s[h]&&s[h].length>0?r.createNodes(l,0,s[h]):l.async.enable&&l.async.url&&l.async.url!==""&&r.asyncNode(l),c}};var ot=n.fn.zTree,f=u.$,i=ot.consts})(jQuery),function(n){var c,l,a,e={event:{CHECK:"ztree_check"},id:{CHECK:"_check"},checkbox:{STYLE:"checkbox",DEFAULT:"chk",DISABLED:"disable",FALSE:"false",TRUE:"true",FULL:"full",PART:"part",FOCUS:"focus"},radio:{STYLE:"radio",TYPE_ALL:"all",TYPE_LEVEL:"level"}},v={check:{enable:!1,autoCheckTrigger:!1,chkStyle:e.checkbox.STYLE,nocheckInherit:!1,chkDisabledInherit:!1,radioType:e.radio.TYPE_LEVEL,chkboxType:{Y:"ps",N:"ps"}},data:{key:{checked:"checked"}},callback:{beforeCheck:null,onCheck:null}},o,s,h;c=function(n,e){if(e.chkDisabled===!0)return!1;var o=r.getSetting(n.data.treeId),s=o.data.key.checked;return u.apply(o.callback.beforeCheck,[o.treeId,e],!0)==!1?!0:(e[s]=!e[s],t.checkNodeRelation(o,e),s=f(e,i.id.CHECK,o),t.setChkClass(o,s,e),t.repairParentChkClassWithSelf(o,e),o.treeObj.trigger(i.event.CHECK,[n,o.treeId,e]),!0)};l=function(n,u){if(u.chkDisabled===!0)return!1;var e=r.getSetting(n.data.treeId),o=f(u,i.id.CHECK,e);return u.check_Focus=!0,t.setChkClass(e,o,u),!0};a=function(n,u){if(u.chkDisabled===!0)return!1;var e=r.getSetting(n.data.treeId),o=f(u,i.id.CHECK,e);return u.check_Focus=!1,t.setChkClass(e,o,u),!0};n.extend(!0,n.fn.zTree.consts,e);n.extend(!0,n.fn.zTree._z,{tools:{},view:{checkNodeRelation:function(n,u){var e,o,l,c=n.data.key.children,h=n.data.key.checked,s;if(e=i.radio,n.check.chkStyle==e.STYLE){if(s=r.getRadioCheckedList(n),u[h])if(n.check.radioType==e.TYPE_ALL){for(o=s.length-1;o>=0;o--)e=s[o],e[h]=!1,s.splice(o,1),t.setChkClass(n,f(e,i.id.CHECK,n),e),e.parentTId!=u.parentTId&&t.repairParentChkClassWithSelf(n,e);s.push(u)}else for(s=u.parentTId?u.getParentNode():r.getRoot(n),o=0,l=s[c].length;o<l;o++)e=s[c][o],e[h]&&e!=u&&(e[h]=!1,t.setChkClass(n,f(e,i.id.CHECK,n),e));else if(n.check.radioType==e.TYPE_ALL)for(o=0,l=s.length;o<l;o++)if(u==s[o]){s.splice(o,1);break}}else u[h]&&(!u[c]||u[c].length==0||n.check.chkboxType.Y.indexOf("s")>-1)&&t.setSonNodeCheckBox(n,u,!0),!u[h]&&(!u[c]||u[c].length==0||n.check.chkboxType.N.indexOf("s")>-1)&&t.setSonNodeCheckBox(n,u,!1),u[h]&&n.check.chkboxType.Y.indexOf("p")>-1&&t.setParentNodeCheckBox(n,u,!0),!u[h]&&n.check.chkboxType.N.indexOf("p")>-1&&t.setParentNodeCheckBox(n,u,!1)},makeChkClass:function(n,t){var u=n.data.key.checked,r=i.checkbox,f=i.radio,e="",e=t.chkDisabled===!0?r.DISABLED:t.halfCheck?r.PART:n.check.chkStyle==f.STYLE?t.check_Child_State<1?r.FULL:r.PART:t[u]?t.check_Child_State===2||t.check_Child_State===-1?r.FULL:r.PART:t.check_Child_State<1?r.FULL:r.PART,u=n.check.chkStyle+"_"+(t[u]?r.TRUE:r.FALSE)+"_"+e,u=t.check_Focus&&t.chkDisabled!==!0?u+"_"+r.FOCUS:u;return i.className.BUTTON+" "+r.DEFAULT+" "+u},repairAllChk:function(n,u){var f;if(n.check.enable&&n.check.chkStyle===i.checkbox.STYLE)for(var h=n.data.key.checked,o=n.data.key.children,s=r.getRoot(n),e=0,c=s[o].length;e<c;e++)f=s[o][e],f.nocheck!==!0&&f.chkDisabled!==!0&&(f[h]=u),t.setSonNodeCheckBox(n,f,u)},repairChkClass:function(n,u){if(u&&(r.makeChkFlag(n,u),u.nocheck!==!0)){var e=f(u,i.id.CHECK,n);t.setChkClass(n,e,u)}},repairParentChkClass:function(n,i){if(i&&i.parentTId){var r=i.getParentNode();t.repairChkClass(n,r);t.repairParentChkClass(n,r)}},repairParentChkClassWithSelf:function(n,i){if(i){var r=n.data.key.children;i[r]&&i[r].length>0?t.repairParentChkClass(n,i[r][0]):t.repairParentChkClass(n,i)}},repairSonChkDisabled:function(n,i,r,u){var f,e,o;if(i&&(f=n.data.key.children,i.chkDisabled!=r&&(i.chkDisabled=r),t.repairChkClass(n,i),i[f]&&u))for(e=0,o=i[f].length;e<o;e++)t.repairSonChkDisabled(n,i[f][e],r,u)},repairParentChkDisabled:function(n,i,r,u){i&&(i.chkDisabled!=r&&u&&(i.chkDisabled=r),t.repairChkClass(n,i),t.repairParentChkDisabled(n,i.getParentNode(),r,u))},setChkClass:function(n,i,r){i&&(r.nocheck===!0?i.hide():i.show(),i.removeClass(),i.addClass(t.makeChkClass(n,r)))},setParentNodeCheckBox:function(n,u,e,o){var s=n.data.key.children,l=n.data.key.checked,c=f(u,i.id.CHECK,n);if(o||(o=u),r.makeChkFlag(n,u),u.nocheck!==!0&&u.chkDisabled!==!0&&(u[l]=e,t.setChkClass(n,c,u),n.check.autoCheckTrigger&&u!=o&&n.treeObj.trigger(i.event.CHECK,[null,n.treeId,u])),u.parentTId){if(c=!0,!e)for(var s=u.getParentNode()[s],h=0,a=s.length;h<a;h++)if(s[h].nocheck!==!0&&s[h].chkDisabled!==!0&&s[h][l]||(s[h].nocheck===!0||s[h].chkDisabled===!0)&&s[h].check_Child_State>0){c=!1;break}c&&t.setParentNodeCheckBox(n,u.getParentNode(),e,o)}},setSonNodeCheckBox:function(n,u,e,o){var h,c,a,l;if(u){var s=n.data.key.children,v=n.data.key.checked,y=f(u,i.id.CHECK,n);if(o||(o=u),h=!1,u[s])for(c=0,a=u[s].length;c<a&&u.chkDisabled!==!0;c++)l=u[s][c],t.setSonNodeCheckBox(n,l,e,o),l.chkDisabled===!0&&(h=!0);u!=r.getRoot(n)&&u.chkDisabled!==!0&&(h&&u.nocheck!==!0&&r.makeChkFlag(n,u),u.nocheck!==!0&&u.chkDisabled!==!0?(u[v]=e,h)||(u.check_Child_State=u[s]&&u[s].length>0?e?2:0:-1):u.check_Child_State=-1,t.setChkClass(n,y,u),n.check.autoCheckTrigger&&u!=o&&u.nocheck!==!0&&u.chkDisabled!==!0&&n.treeObj.trigger(i.event.CHECK,[null,n.treeId,u]))}}},event:{},data:{getRadioCheckedList:function(n){for(var i=r.getRoot(n).radioCheckedList,t=0,u=i.length;t<u;t++)r.getNodeCache(n,i[t].tId)||(i.splice(t,1),t--,u--);return i},getCheckStatus:function(n,t){if(!n.check.enable||t.nocheck||t.chkDisabled)return null;var r=n.data.key.checked;return{checked:t[r],half:t.halfCheck?t.halfCheck:n.check.chkStyle==i.radio.STYLE?t.check_Child_State===2:t[r]?t.check_Child_State>-1&&t.check_Child_State<2:t.check_Child_State>0}},getTreeCheckedNodes:function(n,t,u,f){if(!t)return[];for(var s=n.data.key.children,h=n.data.key.checked,o=u&&n.check.chkStyle==i.radio.STYLE&&n.check.radioType==i.radio.TYPE_ALL,f=f?f:[],e=0,c=t.length;e<c;e++){if(t[e].nocheck!==!0&&t[e].chkDisabled!==!0&&t[e][h]==u&&(f.push(t[e]),o))break;if(r.getTreeCheckedNodes(n,t[e][s],u,f),o&&f.length>0)break}return f},getTreeChangeCheckedNodes:function(n,t,i){if(!t)return[];for(var f=n.data.key.children,e=n.data.key.checked,i=i?i:[],u=0,o=t.length;u<o;u++)t[u].nocheck!==!0&&t[u].chkDisabled!==!0&&t[u][e]!=t[u].checkedOld&&i.push(t[u]),r.getTreeChangeCheckedNodes(n,t[u][f],i);return i},makeChkFlag:function(n,t){var e,h,r,u;if(t){var o=n.data.key.children,s=n.data.key.checked,f=-1;if(t[o])for(e=0,h=t[o].length;e<h;e++)if(r=t[o][e],u=-1,n.check.chkStyle==i.radio.STYLE)if(u=r.nocheck===!0||r.chkDisabled===!0?r.check_Child_State:r.halfCheck===!0?2:r[s]?2:r.check_Child_State>0?2:0,u==2){f=2;break}else u==0&&(f=0);else if(n.check.chkStyle==i.checkbox.STYLE)if(u=r.nocheck===!0||r.chkDisabled===!0?r.check_Child_State:r.halfCheck===!0?1:r[s]?r.check_Child_State===-1||r.check_Child_State===2?2:1:r.check_Child_State>0?1:0,u===1){f=1;break}else if(u===2&&f>-1&&e>0&&u!==f){f=1;break}else if(f===2&&u>-1&&u<2){f=1;break}else u>-1&&(f=u);t.check_Child_State=f}}}});var n=n.fn.zTree,u=n._z.tools,i=n.consts,t=n._z.view,r=n._z.data,f=u.$;r.exSetting(v);r.addInitBind(function(n){n.treeObj.bind(i.event.CHECK,function(t,i,r,f){u.apply(n.callback.onCheck,[i?i:t,r,f])})});r.addInitUnBind(function(n){n.treeObj.unbind(i.event.CHECK)});r.addInitCache(function(){});r.addInitNode(function(n,t,f,e){f&&(t=n.data.key.checked,typeof f[t]=="string"&&(f[t]=u.eqs(f[t],"true")),f[t]=!!f[t],f.checkedOld=f[t],typeof f.nocheck=="string"&&(f.nocheck=u.eqs(f.nocheck,"true")),f.nocheck=!!f.nocheck||n.check.nocheckInherit&&e&&!!e.nocheck,typeof f.chkDisabled=="string"&&(f.chkDisabled=u.eqs(f.chkDisabled,"true")),f.chkDisabled=!!f.chkDisabled||n.check.chkDisabledInherit&&e&&!!e.chkDisabled,typeof f.halfCheck=="string"&&(f.halfCheck=u.eqs(f.halfCheck,"true")),f.halfCheck=!!f.halfCheck,f.check_Child_State=-1,f.check_Focus=!1,f.getCheckStatus=function(){return r.getCheckStatus(n,f)},n.check.chkStyle==i.radio.STYLE&&n.check.radioType==i.radio.TYPE_ALL&&f[t]&&r.getRoot(n).radioCheckedList.push(f))});r.addInitProxy(function(n){var t=n.target,o=r.getSetting(n.data.treeId),e="",h=null,f="",s=null;if(u.eqs(n.type,"mouseover")?o.check.enable&&u.eqs(t.tagName,"span")&&t.getAttribute("treeNode"+i.id.CHECK)!==null&&(e=u.getNodeMainDom(t).id,f="mouseoverCheck"):u.eqs(n.type,"mouseout")?o.check.enable&&u.eqs(t.tagName,"span")&&t.getAttribute("treeNode"+i.id.CHECK)!==null&&(e=u.getNodeMainDom(t).id,f="mouseoutCheck"):u.eqs(n.type,"click")&&o.check.enable&&u.eqs(t.tagName,"span")&&t.getAttribute("treeNode"+i.id.CHECK)!==null&&(e=u.getNodeMainDom(t).id,f="checkNode"),e.length>0)switch(h=r.getNodeCache(o,e),f){case"checkNode":s=c;break;case"mouseoverCheck":s=l;break;case"mouseoutCheck":s=a}return{stop:f==="checkNode",node:h,nodeEventType:f,nodeEventCallback:s,treeEventType:"",treeEventCallback:null}},!0);r.addInitRoot(function(n){r.getRoot(n).radioCheckedList=[]});r.addBeforeA(function(n,u,f){n.check.enable&&(r.makeChkFlag(n,u),f.push("<span ID='",u.tId,i.id.CHECK,"' class='",t.makeChkClass(n,u),"' treeNode",i.id.CHECK,u.nocheck===!0?" style='display:none;'":"","><\/span>"))});r.addZTreeTools(function(n,e){e.checkNode=function(r,e,o,s){var h=n.data.key.checked;r.chkDisabled!==!0&&(e!==!0&&e!==!1&&(e=!r[h]),s=!!s,(r[h]!==e||o)&&!(s&&u.apply(this.setting.callback.beforeCheck,[n.treeId,r],!0)==!1)&&u.uCanDo(this.setting)&&n.check.enable&&r.nocheck!==!0)&&(r[h]=e,e=f(r,i.id.CHECK,n),(o||n.check.chkStyle===i.radio.STYLE)&&t.checkNodeRelation(n,r),t.setChkClass(n,e,r),t.repairParentChkClassWithSelf(n,r),s&&n.treeObj.trigger(i.event.CHECK,[null,n.treeId,r]))};e.checkAllNodes=function(i){t.repairAllChk(n,!!i)};e.getCheckedNodes=function(t){var i=n.data.key.children;return r.getTreeCheckedNodes(n,r.getRoot(n)[i],t!==!1)};e.getChangeCheckedNodes=function(){var t=n.data.key.children;return r.getTreeChangeCheckedNodes(n,r.getRoot(n)[t])};e.setChkDisabled=function(i,r,u,f){r=!!r;u=!!u;t.repairSonChkDisabled(n,i,r,!!f);t.repairParentChkDisabled(n,i.getParentNode(),r,u)};var o=e.updateNode;e.updateNode=function(r,s){if(o&&o.apply(e,arguments),r&&n.check.enable&&f(r,n).get(0)&&u.uCanDo(n)){var h=f(r,i.id.CHECK,n);(s==!0||n.check.chkStyle===i.radio.STYLE)&&t.checkNodeRelation(n,r);t.setChkClass(n,h,r);t.repairParentChkClassWithSelf(n,r)}}});o=t.createNodes;t.createNodes=function(n,i,r,u){o&&o.apply(t,arguments);r&&t.repairParentChkClassWithSelf(n,u)};s=t.removeNode;t.removeNode=function(n,i){var r=i.getParentNode();s&&s.apply(t,arguments);i&&r&&(t.repairChkClass(n,r),t.repairParentChkClass(n,r))};h=t.appendNodes;t.appendNodes=function(n,i,u,f){var e="";return h&&(e=h.apply(t,arguments)),f&&r.makeChkFlag(n,f),e}}(jQuery)